<div class="overflow-x-auto bg-zinc-50 px-5 py-2 border border-zinc-300 rounded-lg">
  <div class="flex my-5">
    <h1 class="text-3xl text-zinc-700"><b>Jobs com falhas</b></h1>
  </div>
  <hr class="w-full text-zinc-200" />
  <table class="min-w-full divide-y divide-gray-200">
    @if(!isLoading() && data().length > 0) {
      <thead class="bg-gray-50">
      <tr>
        @for (item of table.cols; track $index) {
        <th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">
          {{ item }}
        </th>
        }
      </tr>
    </thead>
    }

    @if(isLoading()) {
      <div class="flex flex-col justify-center text-zinc-700">
        <fa-icon  [icon]="icons.load" class="w-fit spin" />
        <span>Buscando informações...</span>
      </div>
    }

     @if(!isLoading() && data().length === 0) {
    <div class="flex flex-col justify-center text-zinc-700">
      <span>Nenhuma informação encontrada...</span>
    </div>
    } 

    @if(!isLoading()) {
    <tbody class="divide-y divide-gray-100">
      @for (item of data() | paginate: { id: 'failedJobs', itemsPerPage: 5, currentPage: p }; track $index) {
      <tr class="hover:bg-gray-100">
        <td class="px-6 py-4 whitespace-nowrap">
          <div class="flex items-center gap-3">
            <div class="text-sm font-medium text-gray-900">{{ item.id }}</div>
          </div>
        </td>

        <td class="px-6 py-4 whitespace-nowrap">
          <div class="text-sm text-gray-900">{{ item.name }}</div>
        </td>

        <td class="px-6 py-4 whitespace-nowrap hidden sm:table-cell">
          <div class="text-center text-zinc-50 bg-primary rounded-full px-2">OMIE</div>
        </td>

        <td class="px-6 py-4 whitespace-nowrap hidden sm:table-cell">
          <div class="text-sm text-gray-900">{{ item.timestamp | date : 'dd/MM/yyyy hh:mm:ss' }}</div>
        </td>

        <td class="px-6 py-4 whitespace-nowrap hidden sm:table-cell">
          <div class="text-sm text-gray-900">{{ item.failedReason }}</div>
        </td>

        <td class="px-6 py-4 whitespace-nowrap text-right text-sm font-medium">
          <button class="px-3 py-2 rounded bg-zinc-700 text-zinc-50 mx-2 cursor-pointer">Editar</button>
          <button class="px-3 py-2 rounded bg-red-300 hover:bg-red-400 hover:text-zinc-50 text-zinc-50 cursor-pointer">
            Remover
          </button>
        </td>
      </tr>
      }
    </tbody>
    }
  </table>


  @if(data().length > 0) {
    <div class="flex flex-wrap justify-end mb-5 mt-10">
      <pagination-controls
        (pageChange)="p = $event"
        id="failedJobs"
        [previousLabel]="'Anterior'"
        [nextLabel]="'Próximo'"
      />
    </div>
  }
</div>
